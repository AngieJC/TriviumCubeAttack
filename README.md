# TriviumCubeAttack

### build
```bash
g++ -march=native -O3 -std=c++14 NewPattern.cpp -o NewPattern -I/$GUROBI_HOME/include -L/$GUROBI_HOME/lib -lgurobi_c++ -lgurobi95
g++ -march=native -O3 -std=c++14 NestedGraph.cpp -o NestedGraph -I/$GUROBI_HOME/include -L/$GUROBI_HOME/lib -lgurobi_c++ -lgurobi95 -lpthread
```

### usage
#### find new patterns
run BurpNewPattern.ipynb in Jupyter Notebook and will get 12 pruning patterns as follow

```
**********00000110101**********
*        2 sub graphs         *
*******************************
[842, 0] ==> [733, 177]  [842, 0] ==> [732, 177]  [841, 0] ==> [732, 177]  [841, 0] ==> [731, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[842, 0] ==> [733, 177]  [842, 0] ==> [732, 177]  [841, 0] --> [730, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********000001101000**********
*         2 sub graphs         *
********************************
[843, 0] --> [732, 177]  [841, 0] ==> [732, 177]  [841, 0] ==> [731, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[843, 0] --> [732, 177]  [841, 0] --> [730, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********00010111000**********
*        2 sub graphs         *
*******************************
[884, 0] ==> [775, 177]  [884, 0] ==> [774, 177]  [841, 0] -*> [775, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[884, 0] ==> [775, 177]  [884, 0] ==> [774, 177]  [841, 0] --> [730, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********00000111001**********
*        2 sub graphs         *
*******************************
[885, 0] ==> [776, 177]  [885, 0] ==> [775, 177]  [841, 0] -*> [775, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[885, 0] ==> [776, 177]  [885, 0] ==> [775, 177]  [841, 0] --> [730, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********000001110000**********
*         2 sub graphs         *
********************************
[886, 0] --> [775, 177]  [841, 0] -*> [775, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[886, 0] --> [775, 177]  [841, 0] --> [730, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********000001110001**********
*         2 sub graphs         *
********************************
[885, 0] ==> [776, 177]  [885, 0] ==> [775, 177]  [842, 0] -*> [776, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[885, 0] ==> [776, 177]  [885, 0] ==> [775, 177]  [842, 0] --> [731, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********0000011100001**********
*         2 sub graphs          *
*********************************
[886, 0] ==> [777, 177]  [886, 0] ==> [776, 177]  [842, 0] -*> [776, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[886, 0] ==> [777, 177]  [886, 0] ==> [776, 177]  [842, 0] --> [731, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********0000011100000**********
*         2 sub graphs          *
*********************************
[887, 0] --> [776, 177]  [842, 0] -*> [776, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
[887, 0] --> [776, 177]  [842, 0] --> [731, 177]  [840, 0] ==> [731, 177]  [840, 0] ==> [730, 177]  
**********000100000110**********
*         2 sub graphs         *
********************************
[883, 0] --> [772, 177]  [882, 0] ==> [773, 177]  [882, 0] ==> [772, 177]  [840, 0] -*> [774, 177]  
[883, 0] ==> [774, 177]  [883, 0] ==> [773, 177]  [882, 0] ==> [773, 177]  [882, 0] ==> [772, 177]  [840, 0] -*> [774, 177]  
**********0001000100001**********
*         2 sub graphs          *
*********************************
[928, 0] ==> [819, 177]  [928, 0] ==> [818, 177]  [885, 0] -*> [819, 177]  [840, 0] -*> [774, 177]  
[928, 0] ==> [819, 177]  [928, 0] ==> [818, 177]  [885, 0] --> [774, 177]  [840, 0] -*> [774, 177]  
**********0001000100001**********
*         2 sub graphs          *
*********************************
[929, 0] ==> [820, 177]  [929, 0] ==> [819, 177]  [885, 0] -*> [819, 177]  [840, 0] -*> [774, 177]  
[929, 0] ==> [820, 177]  [929, 0] ==> [819, 177]  [885, 0] --> [774, 177]  [840, 0] -*> [774, 177]  
**********0001000100000**********
*         2 sub graphs          *
*********************************
[930, 0] --> [819, 177]  [885, 0] -*> [819, 177]  [840, 0] -*> [774, 177]  
[930, 0] --> [819, 177]  [885, 0] --> [774, 177]  [840, 0] -*> [774, 177]  
```
Nodes are indicated by [round, locate]. For example, [882, 0] is the first bit of $\mathcal{s}^{(882)}$,  
  
[744, 177] is the 178-th bit of $\mathcal{s}^{(744)}$. And we can also denote [882, 0] and [744, 177]  
  
by $A_{882}$ and $B_{744}$.


#### different patterns
```bash
./NewPattern <round>
```
Pattern can be changed by macro definition.

#### nested graph-based model
```bash
./NestedGraph <round>
```
